{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>geopycat is a python package to manage metadata and data of geocat.ch.  geocat.ch is a modified instance of the opensource project geonetwork.  Getting started  And dive into the package or use CLI scripts  Dive in CLI Scripts</p>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#installation-requires-an-installation-of-git","title":"Installation (requires an installation of git)","text":"<p>The package requires <code>python 3</code></p> <p>Using pip - install from github</p> <p> pip install git+https://github.com/geoadmin/lib-geopycat.git Installed </p> <p>From swisstopo network - through proxy (using powershell)</p> <p> &amp; \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\Scripts\\pip3\" install --trusted-host pypi.org --trusted-host pypi.python.org --trusted-host files.pythonhosted.org --trusted-host github.com --proxy=proxy-bvcol.admin.ch:8080 git+https://github.com/geoadmin/lib-geopycat.git </p> <p>Install an older version</p> <p> pip install git+https://github.com/geoadmin/lib-geopycat.git@version </p>"},{"location":"cli_tools/Backup_geocat/","title":"Backup geocat","text":"<p>geopycat provides a CLI script to generate backups of geocat.ch. In order to successfully run this script, you should have admin rights and be able to connect to the PostgreSQL database of geocat.ch.</p>"},{"location":"cli_tools/Backup_geocat/#running-on-unix-system","title":"Running on UNIX system","text":"<pre><code>geocat_backup [-env [env]] [-o [o]] [-m] [-u] [-g] [-s]\n</code></pre> <pre><code>env: int or prod    (optional, by default int)\no: output folder    (optionaL, if not set, the backup will be saved in the current working directory)\n-m: do not backup metadata  (optional)\n-u: do not backup users (optional)\n-g: do not backup groups    (optional)\n-s: do not backup subtemplates  (optional)\n</code></pre>"},{"location":"cli_tools/Backup_geocat/#running-on-windows","title":"Running on windows","text":"<pre><code>python geocat_backup.py [-env [env]] [-o [o]] [-m] [-u] [-g] [-s]\n</code></pre>"},{"location":"cli_tools/Backup_geocat/#running-on-windows-swisstopo","title":"Running on windows (swisstopo)","text":"<pre><code>&amp; \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\python.exe\" \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\scripts\\geocat_backup.py\" [-env] [-o] [-m] [-u] [-g] [-s]\n</code></pre>"},{"location":"cli_tools/Delete_unused_subtemplates/","title":"Delete unused subtemplates","text":"<p>geopycat provides a CLI script to delete subtemplates that are not referenced in any metadata. In order to successfully run this script, you should have admin rights and be able to connect to the PostgreSQL database of geocat.ch.</p> <p>The admin boundaries extent subtemplate are not deleted by this tool even if not used in any metadata. Admin boundaries extent are managed by the geocat team and should be available for everyone</p> <p>When running the script, after analysing all subtemplates, it will show the number of unused subtemplates by contact, extent and format. For each subtemplate type, it will prompt if you want to delete them by ressing y (yes) or not by pressing n (no). Thus it's possible to have control over what type of subtemplate to delete. For example :</p> <p> 3 contact found. Are you sure to delete them ? (y/n) </p>"},{"location":"cli_tools/Delete_unused_subtemplates/#database-connection","title":"Database connection","text":"<p>You can specify the username and password for connecting to the database in environment variables or in CLI parameters (see below). If not, the script will prompt for credentials.</p> <p>In a <code>.env</code> file</p> <pre><code>DB_USERNAME=username\nDB_PASSWORD=password\n</code></pre>"},{"location":"cli_tools/Delete_unused_subtemplates/#running-on-unix-system","title":"Running on UNIX system","text":"<pre><code>delete_unused_subtpl [-env [env]]  [-older-than [older-than]] [--no-backup] [-db-user [database username]] [-db-password [database password]]\n</code></pre> <ul> <li><code>env</code> int or prod (optional, by default int)</li> <li><code>older-than</code> integer (number of months), delete subtemplates that have not been updated since x months (optional, by default 3)</li> <li><code>--no-backup</code> do not backup subtemplates before deletion (optional)</li> <li><code>db username</code>: database username (optional, see Database connection)</li> <li><code>db password</code>: database password (optional, see Database connection)</li> </ul>"},{"location":"cli_tools/Delete_unused_subtemplates/#running-on-windows","title":"Running on windows","text":"<pre><code>python delete_unused_subtpl.py [-env [env]]  [-older-than [older-than]] [--no-backup] [-db-user [database username]] [-db-password [database password]]\n</code></pre>"},{"location":"cli_tools/Delete_unused_subtemplates/#running-on-windows-swisstopo","title":"Running on windows (swisstopo)","text":"<pre><code>&amp; \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\python.exe\" \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\scripts\\delete_unused_subtpl.py\" [-env [env]]  [-older-than [older-than]] [--no-backup] [-db-user [database username]] [-db-password [database password]]\n</code></pre>"},{"location":"cli_tools/Delete_unused_subtemplates/#example-swisstopo","title":"Example (swisstopo)","text":"<pre><code>&amp; \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\python.exe\" \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\scripts\\delete_unused_subtpl.py\" -env prod  -older-than 3\n</code></pre>"},{"location":"cli_tools/Restore_mef/","title":"Restore records from MEF","text":"<p>geopycat provides a CLI script to retore multiple records saved as MEF (Metadata Exchange Format). MEF has the advantage of packing record UUID, permissions and attachments.</p> <p> For now, does not support records that have been deleted </p> <p>The script restores :</p> <ul> <li>XML record by overriding current UUID</li> <li>Group owner and owner ID</li> <li>Attachments</li> <li>Permissions</li> <li>Performs validation of the record</li> </ul>"},{"location":"cli_tools/Restore_mef/#running-on-unix-system","title":"Running on UNIX system","text":"<pre><code>restore_mef [-env [env]] --mef-folder mef-folder\n</code></pre> <ul> <li><code>env</code>: int or prod (optional, by default int)</li> <li><code>mef-folder</code>: folder path containing the MEF files to restore (required)</li> </ul>"},{"location":"cli_tools/Restore_mef/#running-on-windows","title":"Running on windows","text":"<pre><code>python restore_mef.py [-env [env]] --mef-folder mef-folder\n</code></pre>"},{"location":"cli_tools/Restore_mef/#running-on-windows-swisstopo","title":"Running on windows (swisstopo)","text":"<pre><code>&amp; \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\python.exe\" \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\scripts\\restore_mef.py\" [-env [env]] --mef-folder [mef-folder]\n</code></pre>"},{"location":"cli_tools/save_and_close/","title":"Save and close","text":"<p>geopycat provides a CLI script to apply the process done while saving metadata. It basically saves and closes metadata.</p>"},{"location":"cli_tools/save_and_close/#running-on-unix-system","title":"Running on UNIX system","text":"<pre><code>save_and_close [-env [env]]  [--in-groups [in-groups]] [--not-in-groups [not-in-groups]]\n</code></pre> <ul> <li><code>env</code> int or prod (optional, by default int)</li> <li><code>in-groups</code> integers (optional): groups ID list, process metadata from these groups. E.g. <code>--in-groups 42 23 12</code></li> <li><code>not-in-groups</code> integers()optional): groups ID list, do not process metadata from these groups. E.g. <code>--not-in-groups 42 23 12</code></li> </ul>"},{"location":"cli_tools/save_and_close/#running-on-windows","title":"Running on windows","text":"<pre><code>python3 save_and_close.py [-env [env]]  [--in-groups [in-groups]] [--not-in-groups [not-in-groups]]\n</code></pre>"},{"location":"cli_tools/save_and_close/#running-on-windows-swisstopo","title":"Running on windows (swisstopo)","text":"<pre><code>&amp; \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\python.exe\" \"C:\\Program Files\\ArcGIS\\Pro\\bin\\Python\\envs\\arcgispro-py3\\scripts\\save_and_close.py\" [-env [env]]  [--in-groups [in-groups]] [--not-in-groups [not-in-groups]]\n</code></pre>"}]}